
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Sabedoria Estelar dos Povos Origin√°rios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earth & Sky -->
    <!-- Application Structure Plan: The SPA is designed with a thematic, non-linear structure. A fixed sidebar navigation allows users to select a specific celestial entity (Jararaca, Via L√°ctea, Homem Velho, etc.). Clicking a navigation item dynamically displays the corresponding content in the main view area, replacing the previous content. This approach was chosen to break down the dense text into digestible, self-contained topics, empowering users to explore based on their interest rather than a prescribed order. This enhances usability by making information discovery quick and focused. Each content section uses cards and accordions to further organize details, promoting engagement through interaction. A new dedicated section for LLM interaction is added via sidebar navigation, allowing users to query insights dynamically. -->
    <!-- Visualization & Content Choices: Report Info: Descriptions of constellations and their cultural significance. -> Goal: Inform & Organize. -> Viz/Presentation Method: Structured HTML with Tailwind CSS, using cards, lists, and custom icons (Unicode characters) to present qualitative information clearly. Conceptual "visuals" are added using div elements with Tailwind classes for backgrounds/gradients/borders and Unicode icons, providing abstract representations. A new text input/output area is added for LLM interaction. -> Interaction: Click-based navigation to switch between content sections. Clickable headers within sections to reveal more detailed text (accordion-style). Hover effects on the "visuals". A new button triggers LLM text generation based on user input. -> Justification: The content is narrative and descriptive, not quantitative. An interactive text-based approach is most effective. The conceptual visuals enhance understanding. The LLM integration provides dynamic Q&A, directly enhancing knowledge exploration. -> Library/Method: Vanilla JavaScript for interaction logic, Gemini API for LLM. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF8F0; /* Warm Neutral Background */
            color: #4A4A4A;
            background-image: radial-gradient(circle at top left, #FBF4E8 0%, #FDF8F0 50%, #F5EDE6 100%);
        }
        .nav-link {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .nav-link.active {
            background-color: #EAE0D5;
            border-left-color: #C6AC8F; /* Subtle Accent */
            color: #333;
            font-weight: 600;
        }
        .nav-link:hover {
            background-color: #F4ECE0;
            border-left-color: #D6C0A5;
        }
        .content-card {
            background-color: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #EAE0D5;
        }
        .fade-in {
            animation: fadeIn 0.6s ease-out; /* Adjusted duration for smoother fade */
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); } /* Slightly larger initial translateY */
            to { opacity: 1; transform: translateY(0); }
        }
        .concept-visual {
            width: 140px; /* Fixed width for consistency */
            height: 140px; /* Fixed height */
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08), inset 0 0 0 1px rgba(255,255,255,0.5); /* Added inset shadow for inner border effect */
            cursor: pointer;
            transition: all 0.3s ease-in-out; /* Smoother transition */
            border: 1px solid rgba(0,0,0,0.05);
            background-color: #FDFDFD;
        }
        .concept-visual:hover {
            transform: translateY(-8px) rotateY(3deg) scale(1.03); /* More pronounced 3D effect and lift */
            box-shadow: 0 10px 25px rgba(0,0,0,0.2), inset 0 0 0 1px rgba(255,255,255,0.7); /* Deeper shadow on hover */
        }
        .concept-visual .icon {
            font-size: 3rem;
            line-height: 1;
        }
        .concept-visual .label {
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            margin-top: 8px;
            color: #333;
        }
        .concept-visual .description {
            font-size: 0.75rem; /* text-xs */
            color: #666;
            margin-top: 4px;
        }

        /* Specific visual styles */
        .viz-jararaca-rain { background: linear-gradient(135deg, #dbeafe, #93c5fd); } /* Blue-sky gradient */
        .viz-jararaca-snake { background: linear-gradient(135deg, #a78bfa, #8b5cf6); } /* Purple gradient */
        .viz-homemvelho-seasons { background: linear-gradient(135deg, #fde68a, #fcd34d); } /* Yellow-orange gradient */
        .viz-homemvelho-ancestor { background: linear-gradient(135deg, #fed7aa, #fbbf24); } /* Orange-gold gradient */
        .viz-garca-wisdom { background: linear-gradient(135deg, #bfdbfe, #60a5fa); } /* Light blue gradient */
        .viz-garca-connection { background: linear-gradient(135deg, #a78bfa, #c4b5fd); } /* Soft purple gradient */
        .viz-ema-darksky { background: linear-gradient(135deg, #4b5563, #1f2937); color: white; } /* Dark grey gradient */
        .viz-ema-agriculture { background: linear-gradient(135deg, #a7f3d0, #34d399); } /* Green gradient */
        .viz-cruzeiro-compass { background: linear-gradient(135deg, #d1d5db, #9ca3af); } /* Grey gradient */
        .viz-cruzeiro-upright { background: linear-gradient(135deg, #bfdbfe, #3b82f6); } /* Medium blue gradient */
        .viz-vialactea-path { background: linear-gradient(135deg, #c4b5fd, #8b5cf6); } /* Purple-blue gradient */
        .viz-vialactea-spirit { background: linear-gradient(135deg, #fbcfe8, #f472b6); } /* Pink-purple gradient */

        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-top: 4px solid #C6AC8F;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col lg:flex-row">

    <!-- Sidebar Navigation -->
    <aside class="w-full lg:w-64 bg-[#F8F1E9] border-b lg:border-r border-[#EAE0D5] flex-shrink-0">
        <div class="p-6">
            <h1 class="text-xl font-bold text-[#5C4B3E]">Cosmos Ind√≠gena</h1>
            <p class="text-sm text-[#7A6C60] mt-1">Um Olhar para o C√©u Ancestral</p>
        </div>
        <nav id="navigation" class="flex flex-row lg:flex-col overflow-x-auto lg:overflow-x-visible">
            <a href="#jararaca" class="nav-link active p-4 lg:pl-6 text-sm flex items-center gap-3 whitespace-nowrap"><span>üêç</span> Jararaca</a>
            <a href="#homem-velho" class="nav-link p-4 lg:pl-6 text-sm flex items-center gap-3 whitespace-nowrap"><span>üë¥</span> Homem Velho</a>
            <a href="#garca" class="nav-link p-4 lg:pl-6 text-sm flex items-center gap-3 whitespace-nowrap"><span>üïäÔ∏è</span> Gar√ßa</a>
            <a href="#ema" class="nav-link p-4 lg:pl-6 text-sm flex items-center gap-3 whitespace-nowrap"><span>ü™∂</span> Ema</a>
            <a href="#cruzeiro" class="nav-link p-4 lg:pl-6 text-sm flex items-center gap-3 whitespace-nowrap"><span>‚ú®</span> Cruzeiro do Sul</a>
            <a href="#via-lactea" class="nav-link p-4 lg:pl-6 text-sm flex items-center gap-3 whitespace-nowrap"><span>üåå</span> Via L√°ctea</a>
            <a href="#ask-elder" class="nav-link p-4 lg:pl-6 text-sm flex items-center gap-3 whitespace-nowrap"><span>üí¨</span> Pergunte ao Anci√£o ‚ú®</a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main id="main-content" class="flex-1 p-4 sm:p-6 lg:p-10">
        <!-- Content will be injected here by JavaScript -->
    </main>

    <script>
        const contentData = {
            'jararaca': {
                title: 'A Constela√ß√£o da Jararaca (A√±a poero)',
                intro: 'Conhecida como "A√±a poero" pelos povos Tukano, a constela√ß√£o da Jararaca √© um calend√°rio natural que marca o in√≠cio do ano. Seu surgimento est√° associado √† √©poca de chuvas intensas e cheias dos rios, influenciando profundamente o ciclo de vida, trabalho e rituais na Amaz√¥nia. Imagine o formato sinuoso de uma jararaca, com partes de seu corpo representando fases da cheia dos rios.',
                visuals: [
                    {
                        className: 'viz-jararaca-rain',
                        icon: 'üåßÔ∏è',
                        label: 'Ciclo das Chuvas',
                        description: 'Visualiza√ß√£o da √©poca de chuvas intensas e cheias dos rios, um sinal vital para a comunidade Tukano.'
                    },
                    {
                        className: 'viz-jararaca-snake',
                        icon: 'üêç',
                        label: 'Silhueta Estelar',
                        description: 'Representa√ß√£o abstrata da constela√ß√£o da Jararaca como uma cobra sinuosa no c√©u noturno, guiando as atividades.'
                    }
                ],
                sections: [
                    {
                        icon: 'üóìÔ∏è',
                        title: 'Calend√°rio Natural e Atividades',
                        content: 'Observada em novembro, a Jararaca indica o come√ßo do ciclo anual para os Tukano. As enchentes associadas a ela afetam diretamente a pesca, que diminui com a subida das √°guas. Isso direciona a comunidade para outras atividades, como a ca√ßa e o plantio, que se tornam mais relevantes nesse per√≠odo, garantindo a subsist√™ncia.'
                    },
                    {
                        icon: 'üë•',
                        title: 'Organiza√ß√£o Social e Rituais',
                        content: 'O aparecimento da constela√ß√£o influencia a organiza√ß√£o social e ritual√≠stica. √â o momento para rituais de passagem, cerim√¥nias como casamentos, a produ√ß√£o de artesanato e importantes trocas entre diferentes grupos. O in√≠cio da passagem da constela√ß√£o √© marcado por rituais de benzimento para prote√ß√£o da comunidade, especialmente contra picadas de jararaca, e para a prepara√ß√£o das atividades da ro√ßa.'
                    },
                    {
                        icon: 'üåç',
                        title: 'Cria√ß√£o do Mundo e Ciclos de Vida',
                        content: 'Os Tukano associam a constela√ß√£o da jararaca a epis√≥dios da cria√ß√£o do mundo, conectando o fen√¥meno natural a narrativas m√≠ticas fundamentais. Cada parte do corpo da serpente celestial corresponde a diferentes fases da enchente, ajudando a entender os ciclos de vida dos peixes e outros animais, adaptando suas atividades de acordo com a √©poca.'
                    }
                ]
            },
            'homem-velho': {
                title: 'A Constela√ß√£o do Homem Velho (Tuya)',
                intro: 'Conhecida por diferentes nomes, como "Tuya" em guarani, a constela√ß√£o do Homem Velho √© um importante marcador temporal e narrativo. Formada pelas constela√ß√µes ocidentais de Touro e √ìrion, ela auxilia na compreens√£o dos ciclos da natureza e est√° associada a mitos de cria√ß√£o. Visualmente, imagine uma figura de anci√£o, com uma das "pernas" possivelmente cortada, representada por uma estrela.',
                visuals: [
                    {
                        className: 'viz-homemvelho-seasons',
                        icon: 'üåû‚ùÑÔ∏è',
                        label: 'In√≠cio das Esta√ß√µes',
                        description: 'Representa a dualidade do Homem Velho indicando o in√≠cio do ver√£o no sul e da esta√ß√£o chuvosa no norte.'
                    },
                    {
                        className: 'viz-homemvelho-ancestor',
                        icon: 'üë¥',
                        label: 'Sabedoria Ancestral',
                        description: 'Simboliza a figura do anci√£o, um guardi√£o do tempo e transmissor de conhecimentos milenares.'
                    }
                ],
                sections: [
                    {
                        icon: '‚è≥',
                        title: 'Marcador Temporal',
                        content: 'A apari√ß√£o do Homem Velho indica o in√≠cio do ver√£o para os povos do sul do Brasil e o come√ßo da esta√ß√£o chuvosa para os do norte. Sua presen√ßa no c√©u marca momentos cruciais para a organiza√ß√£o das comunidades, influenciando o plantio, a colheita e outras atividades di√°rias.'
                    },
                    {
                        icon: 'üìú',
                        title: 'Mitos de Cria√ß√£o e Lendas',
                        content: 'Em muitas narrativas, o Homem Velho √© uma figura tra√≠da pela esposa, que o troca pelo irm√£o. Como recompensa por sua lealdade, os deuses o transformam em constela√ß√£o. Uma vers√£o do mito descreve que a esposa cortou a perna do marido para ficar com o cunhado, mas os deuses, com pena, o transformaram em estrela, sendo que a estrela Betelgeuse representa o local da perna cortada. Ele tamb√©m pode ser visto como um guardi√£o do tempo.'
                    },
                    {
                        icon: 'üåø',
                        title: 'Conex√£o com a Natureza e a Cultura',
                        content: 'Os povos origin√°rios utilizavam as constela√ß√µes para se orientar, prever mudan√ßas clim√°ticas e organizar suas atividades. As lendas associadas ao Homem Velho eram transmitidas oralmente, garantindo a continuidade do conhecimento e da cultura, fortalecendo a rela√ß√£o dos povos ind√≠genas com o meio ambiente. √â um s√≠mbolo de sabedoria ancestral e um guia para a vida na natureza.'
                    }
                ]
            },
            'garca': {
                title: 'A Constela√ß√£o da Gar√ßa',
                intro: 'A constela√ß√£o da Gar√ßa possui um significado profundo para diversos povos origin√°rios, especialmente na Amaz√¥nia. √â associada a ciclos da natureza, sabedoria e, para alguns povos como os Desana, √© uma figura central em suas cosmologias, explicando a origem do universo e da humanidade. Pense na postura elegante e atenta de uma gar√ßa observando.',
                visuals: [
                    {
                        className: 'viz-garca-wisdom',
                        icon: 'üß†',
                        label: 'S√≠mbolo de Sabedoria',
                        description: 'Representa a gar√ßa como um s√≠mbolo de percep√ß√£o, aten√ß√£o e adapta√ß√£o, qualidades valorizadas no conhecimento ind√≠gena.'
                    },
                    {
                        className: 'viz-garca-connection',
                        icon: '‚ÜîÔ∏è',
                        label: 'Conex√£o entre Mundos',
                        description: 'Simboliza a transi√ß√£o da gar√ßa entre o mundo f√≠sico e espiritual, conectando c√©u e terra.'
                    }
                ],
                sections: [
                    {
                        icon: 'üîÑ',
                        title: 'Ciclos da Natureza e Sabedoria',
                        content: 'A Gar√ßa √© utilizada para marcar a passagem do tempo e as mudan√ßas nas esta√ß√µes, indicando per√≠odos de chuva, seca, e ciclos de vida de animais e plantas. Com sua observa√ß√£o atenta e movimentos precisos, √© vista como um s√≠mbolo de sabedoria, percep√ß√£o e capacidade de adapta√ß√£o, servindo como um lembrete para a import√¢ncia da observa√ß√£o cuidadosa e da aten√ß√£o plena.'
                    },
                    {
                        icon: 'üåå',
                        title: 'Origem, Cria√ß√£o e Conex√£o entre Mundos',
                        content: 'Em algumas cosmologias, a Gar√ßa √© uma figura central, associada √† cria√ß√£o do mundo e ao surgimento dos seres vivos. Ela √© vista como um ser que transita entre diferentes planos, conectando o mundo f√≠sico e o espiritual, o c√©u e a terra.'
                    },
                    {
                        icon: 'üé®',
                        title: 'Diversidade de Interpreta√ß√µes',
                        content: '√â importante ressaltar que cada povo ind√≠gena possui suas pr√≥prias interpreta√ß√µes e hist√≥rias relacionadas √†s constela√ß√µes, refletindo suas experi√™ncias e conhecimentos √∫nicos sobre o mundo natural e espiritual. Para os Desana, a Gar√ßa √© fundamental em sua vis√£o de mundo, explicando a origem da humanidade e a estrutura do universo.'
                    }
                ]
            },
            'ema': {
                title: 'A Constela√ß√£o da Ema (Guir√° Nhandu)',
                intro: 'Conhecida como "Guir√° Nhandu" em tupi-guarani, a Ema √© uma das mais importantes "constela√ß√µes escuras", formada por uma mancha na Via L√°ctea que se assemelha √† silhueta de uma ema. Seu surgimento entre junho e julho √© um calend√°rio agr√≠cola preciso, indicando o in√≠cio do inverno no sul e da esta√ß√£o seca no norte.',
                visuals: [
                    {
                        className: 'viz-ema-darksky',
                        icon: '‚ö´',
                        label: 'A Constela√ß√£o Escura',
                        description: 'Representa√ß√£o da silhueta escura da Ema formada pela aus√™ncia de estrelas na Via L√°ctea.'
                    },
                    {
                        className: 'viz-ema-agriculture',
                        icon: 'üå±',
                        label: 'Ciclo Agr√≠cola',
                        description: 'Simboliza a influ√™ncia da Ema no calend√°rio de plantio e colheita das comunidades ind√≠genas.'
                    }
                ],
                sections: [
                    {
                        icon: 'üåΩ',
                        title: 'Calend√°rio Agr√≠cola',
                        content: 'A constela√ß√£o da Ema √© um dos principais elementos que os povos ind√≠genas utilizam para marcar a passagem das esta√ß√µes do ano e organizar suas atividades agr√≠colas. Ela √© um guia essencial para determinar o tempo de plantio, colheita e outras atividades sazonais, demonstrando um profundo conhecimento da rela√ß√£o entre c√©u e terra.'
                    },
                    {
                        icon: '‚ùÑÔ∏è‚òÄÔ∏è',
                        title: 'Marca√ß√£o das Esta√ß√µes',
                        content: 'No sul do Brasil, o aparecimento da Ema no c√©u indica o in√≠cio do inverno, um per√≠odo que requer planejamento para a sobreviv√™ncia, como o armazenamento de alimentos e a prepara√ß√£o para as baixas temperaturas. Para os povos do norte, a Ema anuncia o in√≠cio da esta√ß√£o seca, influenciando as pr√°ticas de ca√ßa, pesca e agricultura de forma adaptativa.'
                    },
                    {
                        icon: 'üî≠',
                        title: 'Como Identificar a Constela√ß√£o',
                        content: 'A Ema n√£o √© formada por estrelas brilhantes, mas pela silhueta escura que se assemelha a uma ema na Via L√°ctea, e algumas estrelas pr√≥ximas. Para identific√°-la, √© importante observar o c√©u noturno no lado leste, no per√≠odo entre junho e julho, ao anoitecer. A constela√ß√£o da Ema se encontra pr√≥xima √†s constela√ß√µes do Cruzeiro do Sul e do Escorpi√£o.'
                    }
                ]
            },
            'cruzeiro': {
                title: 'O Cruzeiro do Sul (Crux)',
                intro: 'O Cruzeiro do Sul √© uma constela√ß√£o de grande import√¢ncia no Hemisf√©rio Sul, usada para orienta√ß√£o e marca√ß√£o do tempo. Para muitos povos origin√°rios, como os Tupi-Guarani, suas estrelas e posi√ß√£o s√£o fundamentais para a vida cotidiana e ritual√≠stica. Visualize o formato cl√°ssico de uma cruz brilhante no c√©u noturno.',
                visuals: [
                    {
                        className: 'viz-cruzeiro-compass',
                        icon: 'üß≠',
                        label: 'B√∫ssola Natural',
                        description: 'Ilustra o uso do Cruzeiro do Sul como um guia de navega√ß√£o, apontando para o sul.'
                    },
                    {
                        className: 'viz-cruzeiro-upright',
                        icon: '‚úùÔ∏è',
                        label: 'A Cruz e as Esta√ß√µes',
                        description: 'Representa a posi√ß√£o do Cruzeiro do Sul no c√©u, indicando diferentes √©pocas do ano, como o inverno quando est√° "em p√©".'
                    }
                ],
                sections: [
                    {
                        icon: 'üß≠',
                        title: 'Orienta√ß√£o e Navega√ß√£o',
                        content: 'A constela√ß√£o serve como uma b√∫ssola natural, com o eixo maior da cruz apontando diretamente para o sul. Isso permite que os povos se localizem e se desloquem com seguran√ßa em seus territ√≥rios, tanto na terra quanto na √°gua, um conhecimento vital para a navega√ß√£o e explora√ß√£o.'
                    },
                    {
                        icon: 'üóìÔ∏è',
                        title: 'Marca√ß√£o do Tempo e Esta√ß√µes',
                        content: 'A posi√ß√£o do Cruzeiro do Sul ao longo da noite e do ano auxilia na identifica√ß√£o de diferentes esta√ß√µes e intervalos de tempo, sendo usado como um calend√°rio agr√≠cola. Para os Tupi-Guarani, a posi√ß√£o do Cruzeiro do Sul (que eles associam √† constela√ß√£o da Ema) ao anoitecer indica o in√≠cio das diferentes esta√ß√µes, como o inverno, quando a cruz est√° "em p√©", apontando para o sul.'
                    },
                    {
                        icon: 'üìú',
                        title: 'Cultura e Mitologia Tupi-Guarani',
                        content: 'Muitos povos origin√°rios possuem hist√≥rias e mitos associados ao Cruzeiro do Sul, que ajudam a explicar a origem da constela√ß√£o e seus significados. Para os Tupi-Guarani, o Cruzeiro do Sul √© a constela√ß√£o da Ema, um animal importante em sua mitologia. A constela√ß√£o tamb√©m est√° presente em rituais e pr√°ticas culturais, conectando o mundo terreno ao celestial.'
                    }
                ]
            },
            'via-lactea': {
                title: 'A Via L√°ctea: O Caminho Sagrado',
                intro: 'Longe de ser apenas um aglomerado de estrelas, a Via L√°ctea √© interpretada por muitos povos origin√°rios como uma entidade viva e central em suas cosmologias. Ela √© um caminho que conecta mundos, a morada de seres divinos e uma fonte inesgot√°vel de hist√≥rias. Pense na vasta faixa brilhante que atravessa o c√©u noturno como uma grande trilha ou um rio celestial.',
                visuals: [
                    {
                        className: 'viz-vialactea-path',
                        icon: '‚ú®',
                        label: 'Caminho Estrelado',
                        description: 'Representa√ß√£o do caminho sagrado que a Via L√°ctea simboliza, conectando diferentes planos de exist√™ncia.'
                    },
                    {
                        className: 'viz-vialactea-spirit',
                        icon: 'üåü',
                        label: 'Morada de Ancestrais',
                        description: 'Simboliza a Via L√°ctea como o lar de divindades e esp√≠ritos ancestrais para diversas culturas ind√≠genas.'
                    }
                ],
                sections: [
                    {
                        icon: '‚ú®',
                        title: 'Caminho que Conecta Planos',
                        content: 'A Via L√°ctea √© frequentemente vista como um caminho sagrado que conecta diferentes planos de exist√™ncia, como o c√©u e a terra, o mundo dos vivos e o mundo dos esp√≠ritos ou ancestrais. √â um elo entre o cosmo e a vida terrena, uma ponte para o transcendente.'
                    },
                    {
                        icon: 'üè†',
                        title: 'Morada de Divindades e Ancestrais',
                        content: 'Em diversas culturas, a faixa brilhante da Via L√°ctea √© considerada a morada de seres superiores, deuses criadores ou esp√≠ritos de ancestrais que olham por suas comunidades na Terra, um lugar de poder e rever√™ncia.'
                    },
                    {
                        icon: 'üìñ',
                        title: 'Fonte de Hist√≥rias e Guia Natural',
                        content: 'As constela√ß√µes, tanto as de estrelas brilhantes quanto as escuras (como a Ema e a Jararaca), encontradas na Via L√°ctea s√£o elementos centrais de narrativas m√≠ticas que explicam a origem do mundo, o comportamento dos animais e as rela√ß√µes entre os seres. Elas tamb√©m servem como um guia fundamental para identificar √©pocas do ano, prever eventos naturais e orientar a ca√ßa, a pesca e a agricultura.'
                    }
                ]
            },
            'ask-elder': {
                title: 'Pergunte ao Anci√£o Estelar ‚ú®',
                intro: 'Tenha uma conversa com um "anci√£o" virtual e explore as profundezas do conhecimento ind√≠gena sobre o c√©u e a natureza. Fa√ßa sua pergunta e receba uma resposta inspirada na sabedoria ancestral.',
                visuals: [], // No specific visuals for this interactive section
                sections: [] // Content dynamically generated
            }
        };

        const mainContent = document.getElementById('main-content');
        const navigationLinks = document.querySelectorAll('#navigation .nav-link');

        async function fetchGeminiResponse(prompt) {
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = AIzaSyD7ca9pQ5LfPAupxdUa5qAs_dM7S8wDGCM; // If you want to use models other than gemini-2.5-flash-preview-05-20 or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            let response;
            let result;
            let retries = 0;
            const maxRetries = 5;
            const baseDelay = 1000; // 1 second

            while (retries < maxRetries) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.status === 429) { // Too Many Requests
                        retries++;
                        const delay = baseDelay * Math.pow(2, retries - 1);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }

                    result = await response.json();
                    break; // Success, exit loop
                } catch (error) {
                    retries++;
                    const delay = baseDelay * Math.pow(2, retries - 1);
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }

            if (result && result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                return result.candidates[0].content.parts[0].text;
            } else {
                return "Desculpe, n√£o consegui obter uma resposta do anci√£o estelar no momento. Tente novamente mais tarde.";
            }
        }

        function renderContent(key) {
            const data = contentData[key];
            if (!data) return;

            let contentHtml = '';

            if (key === 'ask-elder') {
                contentHtml = `
                    <div class="fade-in">
                        <h2 class="text-3xl font-bold text-[#5C4B3E]">${data.title}</h2>
                        <p class="mt-4 mb-8 text-gray-700 max-w-3xl">${data.intro}</p>
                        <div class="content-card p-6 flex flex-col gap-4">
                            <textarea id="elder-question" class="w-full p-3 border border-[#D6C0A5] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C6AC8F] text-gray-800" rows="4" placeholder="Fa√ßa sua pergunta ao anci√£o estelar..."></textarea>
                            <button id="ask-button" class="bg-[#C6AC8F] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#A98E70] transition-colors duration-200 flex items-center justify-center gap-2">
                                <span class="text-xl">‚ú®</span> Perguntar
                            </button>
                            <div id="elder-response" class="mt-4 p-4 bg-[#F8F1E9] border border-[#EAE0D5] rounded-lg text-gray-800 min-h-[80px] flex items-center justify-center text-center">
                                Digite sua pergunta acima para conversar com o anci√£o estelar.
                            </div>
                        </div>
                    </div>
                `;
            } else {
                let visualsHtml = data.visuals.map(viz => `
                    <div class="concept-visual ${viz.className}" title="${viz.description}">
                        <span class="icon">${viz.icon}</span>
                        <span class="label">${viz.label}</span>
                    </div>
                `).join('');

                let sectionsHtml = data.sections.map(section => `
                    <div class="content-card p-6 flex items-start gap-4">
                        <div class="text-2xl">${section.icon}</div>
                        <div>
                            <h3 class="font-semibold text-lg text-[#3D352E]">${section.title}</h3>
                            <p class="mt-1 text-gray-600 text-sm">${section.content}</p>
                        </div>
                    </div>
                `).join('');

                contentHtml = `
                    <div class="fade-in">
                        <h2 class="text-3xl font-bold text-[#5C4B3E]">${data.title}</h2>
                        <p class="mt-4 text-gray-700 max-w-3xl">${data.intro}</p>
                        <div class="flex flex-wrap gap-6 justify-center my-8">
                            ${visualsHtml}
                        </div>
                        <div class="space-y-6">
                            ${sectionsHtml}
                        </div>
                    </div>
                `;
            }

            mainContent.innerHTML = contentHtml;

            if (key === 'ask-elder') {
                const askButton = document.getElementById('ask-button');
                const questionInput = document.getElementById('elder-question');
                const responseDiv = document.getElementById('elder-response');

                askButton.addEventListener('click', async () => {
                    const question = questionInput.value.trim();
                    if (!question) {
                        responseDiv.innerHTML = "Por favor, digite uma pergunta para o anci√£o.";
                        return;
                    }

                    responseDiv.innerHTML = `<div class="loading-spinner"></div> <span class="ml-2">Carregando sabedoria...</span>`;
                    responseDiv.classList.add('flex', 'items-center', 'justify-center', 'text-center');

                    try {
                        const generatedResponse = await fetchGeminiResponse(`Com base nos seguintes conceitos de astronomia ind√≠gena: "${JSON.stringify(contentData)}" e suas informa√ß√µes de constela√ß√µes, responda como um s√°bio anci√£o ind√≠gena √† pergunta: "${question}". Mantenha a resposta concisa e respeitosa, focando na conex√£o do cosmos com a vida dos povos origin√°rios.`);
                        responseDiv.innerHTML = generatedResponse;
                        responseDiv.classList.remove('flex', 'items-center', 'justify-center', 'text-center');
                    } catch (error) {
                        responseDiv.innerHTML = "Erro ao se conectar com o anci√£o estelar. Tente novamente.";
                        responseDiv.classList.remove('flex', 'items-center', 'justify-center', 'text-center');
                    }
                });
            }
        }

        function handleNavClick(event) {
            event.preventDefault();
            const link = event.currentTarget;
            const key = link.getAttribute('href').substring(1);

            // Update active class
            navigationLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');

            // Update URL hash
            window.location.hash = key;

            // Render content
            renderContent(key);
        }

        navigationLinks.forEach(link => {
            link.addEventListener('click', handleNavClick);
        });

        // Initial load
        function initialLoad() {
            const hash = window.location.hash.substring(1);
            const keyToLoad = contentData[hash] ? hash : 'jararaca';
            
            navigationLinks.forEach(l => {
                l.classList.remove('active');
                if (l.getAttribute('href') === `#${keyToLoad}`) {
                    l.classList.add('active');
                }
            });
            
            renderContent(keyToLoad);
        }

        window.addEventListener('DOMContentLoaded', initialLoad);
    </script>

</body>
</html>
